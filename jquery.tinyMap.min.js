/*! jQuery tinyMap v3.3.16, Licensed MIT (c) essoduke.org | https://code.essoduke.org/tinyMap/ */
window.gMapsCallback=function(){console.log("loaded");$(window).trigger("gMapsCallback")};
(function(g,v,r,I){function A(b){var a=0,c;if(b instanceof Array)for(a=0;a<b.length;a+=1)A(b[a]);else if("object"===typeof b)for(c in b)"string"!==typeof b[c]?A(b[c]):(a=b[c].split("."),4===a.length&&(b[c]=google.maps[a[2]][a[3]]))}function q(b,a){var c={lat:"",lng:""},d=[],e=/^[+-]?\d+(\.\d+)?$/;if("string"===typeof b||Array.isArray(b))if(d=Array.isArray(b)?b:b.toString().replace(/\s+/,"").split(","),2===d.length)e.test(d[0])&&e.test(d[1])&&(c.lat=d[0],c.lng=d[1]);else return b;else if("object"===
typeof b){if("function"===typeof b.lat)return b;b.hasOwnProperty("x")&&b.hasOwnProperty("y")?(c.lat=b.x,c.lng=b.y):b.hasOwnProperty("lat")&&b.hasOwnProperty("lng")&&(c.lat=b.lat,c.lng=b.lng)}return!0===a?new google.maps.LatLng(c.lat,c.lng):c}function y(b){var a=b.hasOwnProperty("css")?b.css.toString():"";this.setValues(b);this.span=g("<span/>").css({position:"relative",left:"-50%",top:"0","white-space":"nowrap"}).addClass(a);this.div=g("<div/>").css({position:"absolute",display:"none"});this.span.appendTo(this.div)}
function B(b,a,c){var d=this;a=g.extend({},H,a);d["const"]={};d.map=null;d._markers=[];d._markersCluster=[];d._clusters={};d._bounds={};d._labels=[];d._polylines=[];d._polygons=[];d._circles=[];d._kmls=[];d._directions=[];d._directionsMarkers=[];d._places=[];d.container=b;d.options=a;d.googleMapOptions={};d.interval=parseInt(d.options.interval,10)||200;g(v).on("gMapsCallback",function(){d.init(c)});g(this.container).html(a.loading);return d.init(c)}var E=!1,F=!1,G=!1,z={language:"zh-TW",callback:"gMapsCallback",
api:"https://maps.googleapis.com/maps/api/js",clusterer:"https://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclustererplus/src/markerclusterer_packed.js",withLabel:"https://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerwithlabel/src/markerwithlabel_packed.js"},H={autoLocation:!1,center:[24,121],infoWindowAutoClose:!0,interval:200,loading:"\u8b80\u53d6\u4e2d&hellip;",notFound:"\u627e\u4e0d\u5230\u67e5\u8a62\u7684\u5730\u9ede",zoom:8},C={},C={greyscale:[{featureType:"all",
stylers:[{saturation:-100},{gamma:.5}]}]};B.prototype={VERSION:"3.3.16",formatSize:function(b){return Array.isArray(b)&&2===b.length?new google.maps.Size(b[0],b[1]):b},formatPoint:function(b){return Array.isArray(b)&&2===b.length?new google.maps.Point(b[0],b[1]):b},overlay:function(){var b=this.map,a=this.options;this.kml(b,a);this.directionService(b,a);this.placeMarkers(b,a);this.drawPolyline(b,a);this.drawPolygon(b,a);this.drawCircle(b,a);this.streetView(b,a);this.places(b,a);this.geoLocation(b,
a)},bindEvents:function(b,a){var c=this,d={};switch(typeof a){case "function":google.maps.event.clearListeners(b,"click");google.maps.event.addListener(b,"click",a);break;case "object":for(d in a)"function"===typeof a[d]?"created"===d?a[d].call(b):(google.maps.event.clearListeners(b,d),google.maps.event.addListener(b,d,a[d])):a[d].hasOwnProperty("func")&&"function"===typeof a[d].func?a[d].hasOwnProperty("once")&&!0===a[d].once?google.maps.event.addListenerOnce(b,d,a[d].func):(google.maps.event.clearListeners(b,
d),google.maps.event.addListener(b,d,a[d].func)):"function"===typeof a[d]&&(google.maps.event.clearListeners(b,d),google.maps.event.addListener(b,d,a[d]))}b.hasOwnProperty("defaultInfoWindow")&&(google.maps.event.clearListeners(b,"click"),google.maps.event.addListener(b,"click",function(){var a=0,d={};if(c.options.hasOwnProperty("infoWindowAutoClose")&&!0===c.options.infoWindowAutoClose)for(a=0;a<c._markers.length;a+=1)d=c._markers[a],d.hasOwnProperty("infoWindow")&&"function"===typeof d.infoWindow.close&&
d.infoWindow.close();b.infoWindow.open(c.map,b)}))},kml:function(b,a){var c={url:"",map:b,preserveViewport:!1,suppressInfoWindows:!1},d={},e=0;if(a.hasOwnProperty("kml"))if("string"===typeof a.kml)c.url=a.kml,d=new google.maps.KmlLayer(c),this._kmls.push(d);else if(Array.isArray(a.kml))for(e=0;e<a.kml.length;e+=1)"string"===typeof a.kml[e]?(c.url=a.kml[e],d=new google.maps.KmlLayer(c)):"object"===typeof a.kml[e]&&(c=g.extend({},c,a.kml[e]),d=new google.maps.KmlLayer(c),c.hasOwnProperty("event")&&
this.bindEvents(d,c.event)),this._kmls.push(d)},drawPolyline:function(b,a){var c={},d=[],e={},f={},h={},h={},l=[],k=[],p=0,h={},h={},m=0,w=function(a,b){if(b===google.maps.DirectionsStatus.OK){for(m=0;m<a.routes[0].overview_path.length;m+=1)k.push(a.routes[0].overview_path[m]);e.setPath(k);"function"===typeof c.getDistance&&(f=a.routes[0].legs[0].distance,c.getDistance.call(this,f))}};if(a.hasOwnProperty("polyline")&&Array.isArray(a.polyline))for(p=0;p<a.polyline.length;p+=1)if(c=a.polyline[p],c.hasOwnProperty("coords")&&
Array.isArray(c.coords)){l=new google.maps.MVCArray;for(m=0;m<c.coords.length;m+=1)h=c.coords[m],h=q(h,!0),"function"===typeof h.lat&&l.push(h);h=g.extend({},{strokeColor:c.color||"#FF0000",strokeOpacity:c.opacity||1,strokeWeight:c.width||2},c);e=new google.maps.Polyline(h);this._polylines.push(e);if(2<l.getLength())for(m=0;m<l.length;m+=1)0<m&&l.length-1>m&&d.push({location:l.getAt(m),stopover:!1});c.hasOwnProperty("event")&&this.bindEvents(e,c.event);c.hasOwnProperty("snap")&&!0===c.snap?(h=new google.maps.DirectionsService,
h.route({origin:l.getAt(0),waypoints:d,destination:l.getAt(l.length-1),travelMode:google.maps.DirectionsTravelMode.DRIVING},w)):(e.setPath(l),google.maps.hasOwnProperty("geometry")&&google.maps.geometry.hasOwnProperty("spherical")&&"function"===typeof google.maps.geometry.spherical.computeDistanceBetween&&(f=google.maps.geometry.spherical.computeDistanceBetween(l.getAt(0),l.getAt(l.length-1)),"function"===typeof c.getDistance&&c.getDistance.call(this,f)));e.setMap(b)}},drawPolygon:function(b,a){var c=
{},d={},c=[],e=0,d=0,f={},f={};if(a.hasOwnProperty("polygon")&&Array.isArray(a.polygon))for(e=0;e<a.polygon.length;e+=1)if(c=[],a.polygon[e].hasOwnProperty("coords")){for(d=0;d<a.polygon[e].coords.length;d+=1)f=a.polygon[e].coords[d],f=q(f,!0),"function"===typeof f.lat&&c.push(f);d=g.extend({},{path:c,strokeColor:a.polygon[e].color||"#FF0000",strokeOpacity:1,strokeWeight:a.polygon[e].width||2,fillColor:a.polygon[e].fillcolor||"#CC0000",fillOpacity:.35},a.polygon[e]);c=new google.maps.Polygon(d);this._polygons.push(c);
c.setMap(b);d.hasOwnProperty("event")&&this.bindEvents(c,d.event)}},drawCircle:function(b,a){var c={},d={},c={},e={},f=0;if(a.hasOwnProperty("circle")&&Array.isArray(a.circle))for(f=0;f<a.circle.length;f+=1)d=a.circle[f],c=g.extend({map:b,strokeColor:d.color||"#FF0000",strokeOpacity:d.opacity||.8,strokeWeight:d.width||2,fillColor:d.fillcolor||"#FF0000",fillOpacity:d.fillopacity||.35,radius:d.radius||10,zIndex:100,id:d.hasOwnProperty("id")?d.id:""},d),d.hasOwnProperty("center")&&(e=q(d.center,!0),
c.center=e),"function"===typeof e.lat&&(c=new google.maps.Circle(c),this._circles.push(c),d.hasOwnProperty("event")&&this.bindEvents(c,d.event))},markerIcon:function(b){var a={};if(b.hasOwnProperty("icon")){a=b.icon;if("string"===typeof b.icon)return b.icon;b.icon.hasOwnProperty("url")&&(a.url=b.icon.url);b.icon.hasOwnProperty("size")&&Array.isArray(b.icon.size)&&2===b.icon.size.length&&(a.size=this.formatSize(b.icon.size));b.icon.hasOwnProperty("scaledSize")&&Array.isArray(b.icon.scaledSize)&&2===
b.icon.scaledSize.length&&(a.scaledSize=this.formatSize(b.icon.scaledSize));b.icon.hasOwnProperty("anchor")&&Array.isArray(b.icon.anchor)&&2===b.icon.anchor.length&&(a.anchor=this.formatPoint(b.icon.anchor))}return a},processMarker:function(b,a,c,d){var e=this,f=e.get("marker"),h={},l={},k={};c.hasOwnProperty("position")&&("function"===typeof c.getPosition&&e._bounds.extend(c.position),a.hasOwnProperty("markerFitBounds")&&!0===a.markerFitBounds&&f.marker.length===a.marker.length&&b.fitBounds(e._bounds));
c.hasOwnProperty("text")&&(c.infoWindow=new google.maps.InfoWindow({content:c.text}),c.infoWindow.close(),c.hasOwnProperty("event")&&c.event.hasOwnProperty("click")||(c.defaultInfoWindow=!0),e.bindEvents(c,c.event),c.hasOwnProperty("infoWindowOptions")&&(k=g.extend({},{content:c.infoWindowOptions.hasOwnProperty("content")?c.infoWindowOptions.content:c.text},c.infoWindowOptions),c.infoWindow.setOptions(k),console.dir(k),k.hasOwnProperty("event")&&"undefined"!==typeof k.event&&e.bindEvents(c.infoWindow,
k.event)));d||(!c.hasOwnProperty("cluster")||c.hasOwnProperty("cluster")&&!0===c.cluster)&&"function"===typeof e._clusters.addMarker&&e._clusters.addMarker(c);c.hasOwnProperty("newLabel")&&(l={id:c.id,text:c.newLabel,map:b,css:c.hasOwnProperty("newLabelCSS")?c.newLabelCSS.toString():""},e.get({label:[c.id]},function(b){var d=0,f=b.label.length,k={};if(f)for(d=0;d<f;d+=1)k=b.label[d],k.text=c.newLabel,g(k.span).addClass(c.newLabelCSS),k.bindTo("position",c),k.draw();else h=new y(l),h.bindTo("position",
c),e._labels.push(h),h.set("visible",c.showLabel),"object"===typeof h&&!0===a.markerCluster&&google.maps.event.addListener(c,"map_changed",function(){"function"===typeof h.setMap&&h.set("visible",null!==c.getMap())})}));e.bindEvents(c,c.event)},markerControl:function(){var b=this,a=b.options,c={css:"",label:"\u8acb\u9078\u64c7&hellip;",infoWindow:!0,panTo:!0,onChange:""},d;a.hasOwnProperty("markerControl")&&("string"===typeof a.markerControl?d=g(a.markerControl.toString()):(d=a.markerControl.hasOwnProperty("container")?
g(a.markerControl.container):g(a.markerControl),c=g.extend({},c,a.markerControl)),d.length&&b.get("marker",function(a){var f=['<select class="marker-list-control">',"<option>"+c.label+"</option>"];a.forEach(function(a){"undefined"!==typeof a.infoWindow&&a.infoWindow.close();f.push('<option value="'+a.id+'">'+(a.title?a.title:a.id)+"</option>")});f.push("</select>");d.on("change.tinyMap","select",function(){var a=g(this);b.close("marker");this.value.length&&b.get({marker:[this.value]},function(d){var e=
{};d.marker.length&&"undefined"!==d.marker[0]&&(e=d.marker[0],!0===c.infoWindow&&"undefined"!==typeof e.infoWindow&&"function"===typeof e.infoWindow.open&&e.infoWindow.open(b.map,e),!0===c.panTo&&b.map.panTo(e.getPosition()),"function"===typeof c.onChange&&c.onChange.call(a,e))})}).html(f.join(""));"string"===typeof c.css&&d.find("select").addClass(c.css)}))},placeMarkers:function(b,a,c){var d=this,e={},f={maxZoom:null,gridSize:60},h=Array.isArray(a.marker)?a.marker:[];d.options.hasOwnProperty("markerCluster")&&
"function"===typeof MarkerClusterer&&(f=g.extend({},f,a.markerCluster),d._clusters=new MarkerClusterer(b,[],f),f.hasOwnProperty("event")&&d.bindEvents(d._clusters,f.event));h.forEach(function(f){var h=q(f.addr,!0),p=d.markerIcon(f),m=!0,w=!1,t={},x={},D="undefined"!==typeof f.id?f.id:f.addr.toString().replace(/\s/g,""),n={id:D,map:b,animation:null,showLabel:!0},n=g.extend({},n,f);"modify"===c&&D&&d.get({marker:[D]},function(a){!Array.isArray(a.marker)||!a.marker.length||f.hasOwnProperty("forceInsert")&&
!0===f.forceInsert||(f=g.extend(a.marker[0],f),"function"===typeof d._clusters.removeMarker&&d._clusters.removeMarker(a.marker[0]),m=!1,w=!0)});f.hasOwnProperty("title")&&(n.title=f.title.toString().replace(/<([^>]+)>/g,""));g.isEmptyObject(p)||(n.icon=p);f.hasOwnProperty("animation")&&"string"===typeof f.animation&&(n.animation=google.maps.Animation[f.animation.toUpperCase()]);"string"===typeof h?(e=new google.maps.Geocoder,e.geocode({address:h},function(e,h){h===google.maps.GeocoderStatus.OVER_QUERY_LIMIT?
setTimeout(function(){d.placeMarkers(b,a,c)},d.interval):h===google.maps.GeocoderStatus.OK&&(!m&&w?("function"===typeof f.setPosition&&(f.setPosition(e[0].geometry.location),n.hasOwnProperty("title")&&f.setTitle(n.title),n.hasOwnProperty("icon")&&f.setIcon(n.icon)),x=f):(n.position=e[0].geometry.location,t=a.hasOwnProperty("markerWithLabel")&&!0===a.markerWithLabel?"function"===typeof MarkerWithLabel?new MarkerWithLabel(n):new google.maps.Marker(n):new google.maps.Marker(n),d._markers.push(t),x=t),
d.processMarker(b,a,x,c))})):(!m&&w?("function"===typeof f.setPosition&&(f.setPosition(h),n.hasOwnProperty("title")&&f.setTitle(n.title),n.hasOwnProperty("icon")&&f.setIcon(n.icon)),x=f):(n.position=h,t=a.hasOwnProperty("markerWithLabel")&&!0===a.markerWithLabel?"function"===typeof MarkerWithLabel?new MarkerWithLabel(n):new google.maps.Marker(n):new google.maps.Marker(n),d._markers.push(t),x=t),d.processMarker(b,a,x,c))});d.markerControl()},directionService:function(b,a){var c=this,d=new google.maps.DirectionsService;
Array.isArray(a.direction)&&a.direction.forEach(function(a){if("undefined"!==typeof a.from&&"undefined"!==typeof a.to){var f={},h=new google.maps.DirectionsRenderer,l=g.extend({},{infoWindow:new google.maps.InfoWindow,map:c.map},a),k=[],p=[],m=[];f.origin=q(a.from,!0);f.destination=q(a.to,!0);f.travelMode=a.hasOwnProperty("travel")&&google.maps.TravelMode[a.travel.toString().toUpperCase()]?google.maps.TravelMode[a.travel.toString().toUpperCase()]:google.maps.TravelMode.DRIVING;a.hasOwnProperty("panel")&&
g(a.panel).length&&(l.panel=g(a.panel).get(0));a.hasOwnProperty("requestExtra")&&a.requestExtra&&(f=g.extend({},f,a.requestExtra));a.hasOwnProperty("waypoint")&&Array.isArray(a.waypoint)&&(a.waypoint.forEach(function(a){var c={stopover:!0};"string"===typeof a||Array.isArray(a)?c.location=q(a,!0):a.hasOwnProperty("location")&&(c.location=q(a.location,!0),c.stopover=a.hasOwnProperty("stopover")?a.stopover:!0);p.push(a.text||a.toString());a.hasOwnProperty("icon")&&m.push(a.icon.toString());k.push(c)}),
f.waypoints=k);d.route(f,function(d,g){g===google.maps.DirectionsStatus.OK&&(d.routes.forEach(function(h,g){a.hasOwnProperty("renderAll")&&!0===a.renderAll&&!0===f.provideRouteAlternatives&&new google.maps.DirectionsRenderer({map:b,directions:d,routeIndex:g});var k=h.legs,t="",q="",r={},u=0;a.hasOwnProperty("fromText")&&(t=k[0].start_address=a.fromText);a.hasOwnProperty("toText")&&(1===k.length?k[0].end_address=a.toText:k[k.length-1].end_address=a.toText,q=a.toText);a.hasOwnProperty("icon")&&(l.suppressMarkers=
!0,a.icon.hasOwnProperty("from")&&"string"===typeof a.icon.from&&c.directionServiceMarker(k[0].start_location,{icon:a.icon.from,text:t},l.infoWindow,a),a.icon.hasOwnProperty("to")&&"string"===typeof a.icon.to&&c.directionServiceMarker(k[k.length-1].end_location,{icon:a.icon.to,text:q},l.infoWindow,a));for(u=1;u<k.length;u+=1)a.hasOwnProperty("icon")&&(a.icon.hasOwnProperty("waypoint")&&"string"===typeof a.icon.waypoint?r.icon=a.icon.waypoint:"string"===typeof m[u-1]&&(r.icon=m[u-1]),r.text=p[u-1],
c.directionServiceMarker(k[u].start_location,r,l.infoWindow,a))}),c.bindEvents(h,a.event),h.setOptions(l),h.setDirections(d),c._directions.push(h))})}})},directionServiceMarker:function(b,a,c,d){var e=this,f={},h=g.extend({},{position:b,map:e.map,id:d.hasOwnProperty("id")?d.id:""},a),l=new google.maps.Marker(h);h.hasOwnProperty("text")&&(f=function(){c.setPosition(b);c.setContent(h.text);c.open(e.map,l)});e._directionsMarkers.push(l);e.bindEvents(l,f)},getDirectionsInfo:function(){var b=[];this.get("direction",
function(a){a.forEach(function(a,d){var e=a.getDirections();e.hasOwnProperty("routes")&&"undefined"!==typeof e.routes[0]&&"undefined"!==typeof e.routes[0].legs&&(b[d]=[],e.routes[0].legs.forEach(function(a,c){b[d].push({from:a.start_address,to:a.end_address,distance:a.distance,duration:a.duration})}))})});return b},streetView:function(b,a){var c=a.hasOwnProperty("streetViewObj")?a.streetViewObj:{},d={},d={};"function"===typeof b.getStreetView&&(c.hasOwnProperty("position")?(d=q(c.position,!0),c.position=
"object"===typeof d?b.getCenter():d):c.position=b.getCenter(),c.hasOwnProperty("pov")&&(c.pov=g.extend({},{heading:0,pitch:0,zoom:1},c.pov)),d=b.getStreetView(),d.setOptions(c),c.hasOwnProperty("event")&&this.bindEvents(d,c.event),c.hasOwnProperty("visible")&&d.setVisible(c.visible))},places:function(b,a){var c=this,d={},d=a.hasOwnProperty("places")?a.places:{},e=g.extend({location:b.getCenter(),radius:100},d);e.location=q(e.location,!0);"undefined"!==typeof google.maps.places&&(d=new google.maps.places.PlacesService(b),
d.nearbySearch(e,function(a,d){d===google.maps.places.PlacesServiceStatus.OK&&(c._places.push(a),e.hasOwnProperty("createMarker")&&!0===e.createMarker&&a.forEach(function(a){a.hasOwnProperty("geometry")&&c._markers.push(new google.maps.Marker({map:b,position:a.geometry.location}))}),e.hasOwnProperty("callback")&&"function"===typeof e.callback&&e.callback.call(a))}))},geoLocation:function(b,a){try{var c=this,d={},e=navigator.geolocation;e&&(a.hasOwnProperty("geolocation")&&(d=g.extend({},{maximumAge:6E5,
timeout:3E3,enableHighAccuracy:!1},a.geolocation)),!0!==a.autoLocation&&"function"!==typeof a.autoLocation||e.watchPosition(function(d){"undefined"!==typeof d&&"coords"in d&&"latitude"in d.coords&&"longitude"in d.coords&&(b.panTo(new google.maps.LatLng(d.coords.latitude,d.coords.longitude)),"function"===typeof a.autoLocation&&a.autoLocation.call(c,d))},function(a){console.error(a)},d))}catch(f){}},panTo:function(b){var a=this.map,c={},d={};null!==a&&"undefined"!==typeof a&&(c=q(b,!0),"string"===typeof c?
(d=new google.maps.Geocoder,d.geocode({address:c},function(c,b){b===google.maps.GeocoderStatus.OK&&"function"===typeof a.panTo&&Array.isArray(c)&&c.length?c[0].hasOwnProperty("geometry")&&a.panTo(c[0].geometry.location):console.error(b)})):"function"===typeof a.panTo&&a.panTo(c));return g(this.container)},close:function(b,a){var c=this.get(b),d={},e="";c.hasOwnProperty("map")&&delete c.map;Array.isArray(c)?d[b]=c:d=c;try{for(e in d)Array.isArray(d[e])&&d[e].forEach(function(a){a.hasOwnProperty("infoWindow")&&
"function"===typeof a.infoWindow.close&&a.infoWindow.close()});"function"===typeof a&&a.call(this)}catch(f){console.warn(f)}finally{return g(this.container)}},clear:function(b,a){function c(a,c){"function"===typeof a.setMap&&f._directionsMarkers[c].setMap(null)}function d(a){"direction"===m&&(h.forEach(c),f._directionsMarkers.filter(function(a){return"undefined"!==typeof a}));"function"===typeof a.set&&a.set("visible",!1);"function"===typeof a.setMap&&a.setMap(null);-1!==f[p].indexOf(a)&&delete f[p][f[p].indexOf(a)]}
function e(a){return"undefined"!==typeof a}var f=this,h=f._directionsMarkers,l=f.get(b),k={},p="",m="";"undefined"!==typeof l&&"undefined"!==typeof l.map&&delete l.map;Array.isArray(l)?k[b]=l:k=l;try{for(m in k)Array.isArray(k[m])&&(p="_"+m.toString().toLowerCase()+"s",k[m].forEach(d),f[p]=f[p].filter(e));"function"===typeof a&&a.call(this)}catch(w){console.warn(w)}finally{return g(f.container)}},get:function(b,a){function c(a){(0===b[f].length||-1!==b[f].indexOf(k)||"undefined"!==typeof a.id&&0<
a.id.length&&-1!==a.id.indexOf(b[f]))&&e[f].push(a)}var d=[],e={},f={},h="",l="",k=0;"undefined"===typeof b&&(b={marker:[],label:[],polygon:[],polyline:[],circle:[],direction:[],kml:[],cluster:[],bound:[]});try{if("string"===typeof b)if(-1!==b.indexOf(","))for(d=b.replace(/\s/gi,"").split(","),k=0;k<d.length;k+=1)l=d[k].toString().toLowerCase(),"map"===l?e[l]=this.map:(h="_"+l+"s",e[l]=this[h]);else"map"===b.toString().toLowerCase()?e=this.map:(h="_"+b.toString().toLowerCase()+"s",e=this[h]);else{for(f in b)Array.isArray(b[f])&&
(h="_"+f.toString().toLowerCase()+"s",Array.isArray(this[h])&&(e[f]=[],this[h].forEach(c)));e.map=this.map}"function"===typeof a&&a.call(this,e);return e}catch(g){console.error(g)}finally{return e}},modify:function(b){var a=[],c=[["kml","kml"],["marker","placeMarkers"],["direction","directionService"],["polyline","drawPolyline"],["polygon","drawPolygon"],["circle","drawCircle"],["streetView","streetView"],["markerFitBounds","markerFitBounds"],["places","places"]],d=0,e=this.map;if("undefined"!==typeof b){for(d=
0;d<c.length;d+=1)b.hasOwnProperty(c[d][0])&&a.push(c[d][1]);if(null!==e){if(a.length)for(d=0;d<a.length;d+=1)"function"===typeof this[a[d]]&&("streetView"===a[d]&&(b.streetViewObj=b.streetView,delete b.streetView),this[a[d]](e,b,"modify"));else e.setOptions(b);b.hasOwnProperty("event")&&this.bindEvents(e,b.event);google.maps.event.trigger(e,"resize")}}return g(this.container)},query:function(b,a){var c=this,d=new google.maps.Geocoder,e=q(b),f={};"string"===typeof e?f.address=e:f={location:{lat:parseFloat(e.lat,
10),lng:parseFloat(e.lng,10)}};d.geocode(f,function(d,e){try{if(e===google.maps.GeocoderStatus.OVER_QUERY_LIMIT)setTimeout(function(){c.query(b,a)},c.interval);else if(e===google.maps.GeocoderStatus.OK&&Array.isArray(d)){if(0<d.length&&d[0].hasOwnProperty("geometry"))if("function"===typeof a)a.call(c,d[0]);else return d[0]}else console.error("Geocoder Error Code: "+e)}catch(f){console.error(f)}})},destroy:function(){var b=g(this.container);b.length&&g.removeData(this.container,"tinyMap");return b.empty()},
getKML:function(b){var a=g.extend({},{marker:!0,polyline:!0,polygon:!0,circle:!0,direction:!0,download:!1},b),c="<Placemark> <name><![CDATA[#NAME#]]\x3e</name> <Snippet></Snippet> <description><![CDATA[]]\x3e</description> <styleUrl>#style1</styleUrl> <ExtendedData></ExtendedData> #DATA# </Placemark>".split(" "),d="<Placemark> <styleUrl>#style1</styleUrl> <name><![CDATA[#NAME#]]\x3e</name> <Polygon> <tessellate>1</tessellate> <extrude>1</extrude> <altitudeMode>clampedToGround</altitudeMode> <outerBoundaryIs> <LinearRing> <coordinates>#LATLNG#</coordinates> </LinearRing> </outerBoundaryIs> </Polygon> </Placemark>".split(" "),
e="",f="",h="",l="",k="";b="";this.get("marker,polyline,polygon,circle,direction",function(b){var g="";!0===a.marker&&"undefined"!==typeof b.marker&&b.marker.forEach(function(a){g=[a.getPosition().lng(),a.getPosition().lat()].join();e+=c.join("").replace(/#NAME#/gi,"Markers").replace(/#DATA#/gi,"<Point><coordinates>#LATLNG#,0.000000</coordinates></Point>".replace(/#LATLNG#/gi,g))});!0===a.polyline&&"undefined"!==typeof b.polyline&&b.polyline.forEach(function(a){g="";a.getPath().getArray().forEach(function(a){g+=
[a.lng(),a.lat(),"0.000000\n"].join()});f+=c.join("").replace(/#NAME#/gi,"Polylines").replace(/#DATA#/gi,"<LineString><tessellate>1</tessellate><coordinates>#LATLNG#</coordinates></LineString>".replace(/#LATLNG#/gi,g))});!0===a.polygon&&"undefined"!==typeof b.polygon&&b.polygon.forEach(function(a){g="";a.getPath().getArray().forEach(function(a){g+=[a.lng(),a.lat(),"0.000000\n"].join()});h+=d.join("").replace(/#NAME#/gi,"Polygons").replace(/#LATLNG#/gi,g)});!0===a.circle&&"undefined"!==typeof b.circle&&
b.circle.forEach(function(a){g="";for(var b=Math.PI/180,c=180/Math.PI,c=a.getRadius()/6378137*c,b=c/Math.cos(a.getCenter().lat()*b),e=0,f=0,h=e=0,h=0;65>h;h+=1)e=h/32*Math.PI,f=a.getCenter().lng()+b*Math.cos(e),e=a.getCenter().lat()+c*Math.sin(e),g+=[f,e,"0.000000\n"].join();l+=d.join("").replace(/#NAME#/gi,"Circles").replace(/#LATLNG#/gi,g)});!0===a.direction&&"undefined"!==typeof b.direction&&b.direction.forEach(function(a){a=a.getDirections();a.hasOwnProperty("routes")&&Array.isArray(a.routes)&&
"undefined"!==typeof a.routes[0]&&"undefined"!==typeof a.routes[0].legs&&Array.isArray(a.routes[0].legs)&&a.routes[0].legs.forEach(function(a){Array.isArray(a.steps)&&a.steps.forEach(function(a){g="";Array.isArray(a.path)&&a.path.forEach(function(a){g+=[a.lng(),a.lat(),"0.000000\n"].join()});k+=c.join("").replace(/#NAME#/gi,"Directions").replace(/#DATA#/gi,"<LineString><tessellate>1</tessellate><coordinates>#LATLNG#</coordinates></LineString>".replace(/#LATLNG#/gi,g))})})})});b='<?xml version="1.0" encoding="UTF-8"?><kml xmlns="http://earth.google.com/kml/2.2"><Document><name><![CDATA[jQuery tinyMap Plugin]]\x3e</name><description><![CDATA[]]\x3e</description><Style id="style1"><PolyStyle><color>50F05A14</color><colorMode>normal</colorMode><fill>1</fill><outline>1</outline></PolyStyle><IconStyle><Icon><href>https://maps.google.com/mapfiles/kml/paddle/grn-circle_maps.png</href></Icon></IconStyle></Style>#PLACEMARKS#</Document></kml>'.replace(/#NAME#/gi,
"").replace(/#PLACEMARKS#/gi,e+f+h+l+k);if(!0===a.download)v.open("data:application/vnd.google-earth.kml+xml;charset=utf-8;base64,"+v.btoa(v.decodeURIComponent(v.encodeURIComponent(b))));else return b},init:function(b){var a=this,c={};b={};b=g.extend({},z);var d=b.api.split("?")[0],e="",c={},f={};try{delete b.api,delete b.clusterer,delete b.withLabel,b=g.param(b)}catch(h){}E||"undefined"!==typeof v.google||(c=r.createElement("script"),c.setAttribute("src",[d,b].join("?")),(r.getElementsByTagName("head")[0]||
r.documentElement).appendChild(c),E=!0,c=null);if("object"===typeof v.google){A(a.options);console.dir(a.options);!F&&a.options.hasOwnProperty("markerCluster")&&!1!==a.options.markerCluster&&"undefined"===typeof MarkerClusterer&&(c=r.createElement("script"),c.setAttribute("src",z.clusterer),(r.getElementsByTagName("head")[0]||r.documentElement).appendChild(c),F=!0,c=null);!G&&a.options.hasOwnProperty("markerWithLabel")&&!0===a.options.markerWithLabel&&"undefined"===typeof MarkerWithLabel&&(c=r.createElement("script"),
c.setAttribute("src",z.withLabel),(r.getElementsByTagName("head")[0]||r.documentElement).appendChild(c),G=!0,c=null);a._bounds=new google.maps.LatLngBounds;y.prototype=new google.maps.OverlayView;y.prototype.onAdd=function(){var a=this;null!==a.div&&(a.div.appendTo(g(a.getPanes().overlayLayer)),a.listeners=[google.maps.event.addListener(a,"visible_changed",function(){a.draw()}),google.maps.event.addListener(a,"position_changed",function(){a.draw()}),google.maps.event.addListener(a,"visible_changed",
function(){a.draw()}),google.maps.event.addListener(a,"clickable_changed",function(){a.draw()}),google.maps.event.addListener(a,"text_changed",function(){a.draw()}),google.maps.event.addListener(a,"zindex_changed",function(){a.draw()})])};y.prototype.draw=function(){var a=this.getProjection(),b={};try{null!==this.div&&a&&((b=a.fromLatLngToDivPixel(this.get("position")))&&this.div.css({left:b.x+"px",top:b.y+"px",display:this.get("visible")?"block":"none"}),this.text&&this.span.html(this.text.toString()))}catch(c){console.error(c)}};
y.prototype.onRemove=function(){g(this.div).remove();this.div=null};for(f in a.options)a.options.hasOwnProperty(f)&&(c=a.options[f],/ControlOptions/g.test(f)&&c.hasOwnProperty("position")&&"string"===typeof c.position&&(a.options[f].position=google.maps.ControlPosition[c.position.toUpperCase()]));a.googleMapOptions=a.options;a.options.hasOwnProperty("streetView")&&(a.googleMapOptions.streetViewObj=a.options.streetView,delete a.googleMapOptions.streetView);a.googleMapOptions.center=q(a.options.center,
!0);a.options.hasOwnProperty("styles")&&("string"===typeof a.options.styles&&C.hasOwnProperty(a.options.styles)?a.googleMapOptions.styles=C[a.options.styles]:Array.isArray(a.options.styles)&&(a.googleMapOptions.styles=a.options.styles));"string"===typeof a.options.center?(b=new google.maps.Geocoder,b.geocode({address:a.options.center},function(b,c){try{c===google.maps.GeocoderStatus.OVER_QUERY_LIMIT?setTimeout(function(){a.init()},a.interval):c===google.maps.GeocoderStatus.OK&&Array.isArray(b)?0<
b.length&&b[0].hasOwnProperty("geometry")&&(a.googleMapOptions.center=b[0].geometry.location,a.map=new google.maps.Map(a.container,a.googleMapOptions),google.maps.event.addListenerOnce(a.map,"tilesloaded",function(){a.overlay();google.maps.event.trigger(a.map,"resize")}),a.bindEvents(a.map,a.options.event)):(e=(a.options.notFound||c).toString(),a.container.innerHTML(g("<div/>").text(e).html()),console.error("Geocoder Error Code: "+c))}catch(d){console.error(d)}})):(a.map=new google.maps.Map(a.container,
a.googleMapOptions),google.maps.event.addListenerOnce(a.map,"tilesloaded",function(){a.overlay();google.maps.event.trigger(a.map,"resize")}),a.bindEvents(a.map,a.options.event))}}};g.fn.tinyMapConfigure=function(b){z=g.extend(z,b)};g.fn.tinyMap=function(b){var a={},c=[],d=arguments;return"string"===typeof b?(this.each(function(){a=g.data(this,"tinyMap");a instanceof B&&"function"===typeof a[b]&&(c=a[b].apply(a,Array.prototype.slice.call(d,1)))}),"undefined"!==typeof c?c:this):this.each(function(){g.data(this,
"tinyMap")||g.data(this,"tinyMap",new B(this,b))})}})(window.jQuery||{},window,document);
