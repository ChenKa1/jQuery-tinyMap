/*! jQuery tinyMap, Licensed MIT (c) essoduke.org | http://app.essoduke.org/tinyMap/ */
window.gMapsCallback=function(){$(window).trigger("gMapsCallback")};
(function(f,t,r,z){function p(a,c){var b={lat:"",lng:""},d=[],e=/^[+-]?\d+(\.\d+)?$/;if("string"===typeof a||Array.isArray(a))if(d=Array.isArray(a)?a:a.toString().replace(/\s+/,"").split(","),2===d.length)e.test(d[0])&&e.test(d[1])&&(b.lat=d[0],b.lng=d[1]);else return a;else if("object"===typeof a){if("function"===typeof a.lat)return a;a.hasOwnProperty("x")&&a.hasOwnProperty("y")?(b.lat=a.x,b.lng=a.y):a.hasOwnProperty("lat")&&a.hasOwnProperty("lng")&&(b.lat=a.lat,b.lng=a.lng)}return!0===c?new google.maps.LatLng(b.lat,
b.lng):b}function y(a){var c=a.hasOwnProperty("css")?a.css.toString():"";this.setValues(a);this.span=f("<span/>").css({position:"relative",left:"-50%",top:"0","white-space":"nowrap"}).addClass(c);this.div=f("<div/>").css({position:"absolute",display:"none"});this.span.appendTo(this.div)}function A(a,c){var b=this,d=f.extend({},G,c);b.map=null;b._markers=[];b._markersCluster=[];b._clusters={};b._bounds={};b._labels=[];b._polylines=[];b._polygons=[];b._circles=[];b._kmls=[];b._directions=[];b._directionsMarkers=
[];b._places=[];b.container=a;b.options=d;b.googleMapOptions={};b.interval=parseInt(b.options.interval,10)||200;f(t).on("gMapsCallback",function(){b.init()});f(this.container).html(d.loading);b.init()}var C=!1,D=!1,E=!1,u={sensor:!1,language:"zh-TW",callback:"gMapsCallback",api:"//maps.googleapis.com/maps/api/js",clusterer:"//google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclustererplus/src/markerclusterer_packed.js",withLabel:"//google-maps-utility-library-v3.googlecode.com/svn/trunk/markerwithlabel/src/markerwithlabel_packed.js"},
G={autoLocation:!1,center:[24,121],infoWindowAutoClose:!0,interval:200,loading:"\u8b80\u53d6\u4e2d&hellip;",notFound:"\u627e\u4e0d\u5230\u67e5\u8a62\u7684\u5730\u9ede",zoom:8},B={},B={greyscale:[{featureType:"all",stylers:[{saturation:-100},{gamma:.5}]}]};A.prototype={VERSION:"3.3.0",formatSize:function(a){return Array.isArray(a)&&2===a.length?new google.maps.Size(a[0],a[1]):a},formatPoint:function(a){return Array.isArray(a)&&2===a.length?new google.maps.Point(a[0],a[1]):a},overlay:function(){var a=
this.map,c=this.options;try{this.adsense(a,c),this.kml(a,c),this.direction(a,c),this.placeMarkers(a,c),this.drawPolyline(a,c),this.drawPolygon(a,c),this.drawCircle(a,c),this.streetView(a,c),this.places(a,c),this.geoLocation(a,c)}catch(b){console.error(b)}},bindEvents:function(a,c){var b=this,d={};switch(typeof c){case "function":google.maps.event.addListener(a,"click",c);break;case "object":for(d in c)"function"===typeof c[d]?"created"===d?c[d].call(a):google.maps.event.addListener(a,d,c[d]):c[d].hasOwnProperty("func")&&
"function"===typeof c[d].func?c[d].hasOwnProperty("once")&&!0===c[d].once?google.maps.event.addListenerOnce(a,d,c[d].func):google.maps.event.addListener(a,d,c[d].func):"function"===typeof c[d]&&google.maps.event.addListener(a,d,c[d])}a.hasOwnProperty("infoWindow")&&google.maps.event.addListener(a,"click",function(){var c=0,d={};if(b.options.hasOwnProperty("infoWindowAutoClose")&&!0===b.options.infoWindowAutoClose)for(c=0;c<b._markers.length;c+=1)d=b._markers[c],d.hasOwnProperty("infoWindow")&&"function"===
typeof d.infoWindow.close&&d.infoWindow.close();a.infoWindow.open(b.map,a)})},adsense:function(a,c){var b={};c.hasOwnProperty("adsense")&&(b=f.extend({},{map:a,format:"BANNER",position:"TOP",publisherId:"",channelNumber:""},c.adsense),b.format="undefined"!==google.maps.adsense.AdFormat[b.format]?google.maps.adsense.AdFormat[b.format]:google.maps.adsense.AdFormat.BANNER,b.position="undefined"!==google.maps.ControlPosition[b.position]?google.maps.ControlPosition[b.position]:google.maps.ControlPosition.TOP_CENTER,
new google.maps.adsense.AdUnit(r.createElement("div"),b))},kml:function(a,c){var b={url:"",map:a,preserveViewport:!1,suppressInfoWindows:!1},d={},e=0;if(c.hasOwnProperty("kml"))if("string"===typeof c.kml)b.url=c.kml,d=new google.maps.KmlLayer(b),this._kmls.push(d);else if(Array.isArray(c.kml))for(e=0;e<c.kml.length;e+=1)"string"===typeof c.kml[e]?(b.url=c.kml[e],d=new google.maps.KmlLayer(b)):"object"===typeof c.kml[e]&&(b=f.extend({},b,c.kml[e]),d=new google.maps.KmlLayer(b),b.hasOwnProperty("event")&&
this.bindEvents(d,b.event)),this._kmls.push(d)},drawPolyline:function(a,c){var b={},d=[],e={},g={},h={},h={},l=[],m=[],q=0,h={},h={},k=0,v=function(a,c){if(c===google.maps.DirectionsStatus.OK){for(k=0;k<a.routes[0].overview_path.length;k+=1)m.push(a.routes[0].overview_path[k]);e.setPath(m);"function"===typeof b.getDistance&&(g=a.routes[0].legs[0].distance,b.getDistance.call(this,g))}};if(c.hasOwnProperty("polyline")&&Array.isArray(c.polyline))for(q=0;q<c.polyline.length;q+=1)if(b=c.polyline[q],b.hasOwnProperty("coords")&&
Array.isArray(b.coords)){l=new google.maps.MVCArray;for(k=0;k<b.coords.length;k+=1)h=b.coords[k],h=p(h,!0),"function"===typeof h.lat&&l.push(h);h=f.extend({},{strokeColor:b.color||"#FF0000",strokeOpacity:b.opacity||1,strokeWeight:b.width||2},b);e=new google.maps.Polyline(h);this._polylines.push(e);if(2<l.getLength())for(k=0;k<l.length;k+=1)0<k&&l.length-1>k&&d.push({location:l.getAt(k),stopover:!1});e&&h.hasOwnProperty("event")&&h.event.hasOwnProperty("created")&&"function"===typeof h.event.created&&
h.event.created.call(e,this);b.hasOwnProperty("event")&&this.bindEvents(e,b.event);b.hasOwnProperty("snap")&&!0===b.snap?(h=new google.maps.DirectionsService,h.route({origin:l.getAt(0),waypoints:d,destination:l.getAt(l.length-1),travelMode:google.maps.DirectionsTravelMode.DRIVING},v)):(e.setPath(l),google.maps.hasOwnProperty("geometry")&&google.maps.geometry.hasOwnProperty("spherical")&&"function"===typeof google.maps.geometry.spherical.computeDistanceBetween&&(g=google.maps.geometry.spherical.computeDistanceBetween(l.getAt(0),
l.getAt(l.length-1)),"function"===typeof b.getDistance&&b.getDistance.call(this,g)));e.setMap(a)}},drawPolygon:function(a,c){var b={},d={},b=[],e=0,d=0,g={},g={};if(c.hasOwnProperty("polygon")&&Array.isArray(c.polygon))for(e=0;e<c.polygon.length;e+=1)if(b=[],c.polygon[e].hasOwnProperty("coords")){for(d=0;d<c.polygon[e].coords.length;d+=1)g=c.polygon[e].coords[d],g=p(g,!0),"function"===typeof g.lat&&b.push(g);d=f.extend({},{path:b,strokeColor:c.polygon[e].color||"#FF0000",strokeOpacity:1,strokeWeight:c.polygon[e].width||
2,fillColor:c.polygon[e].fillcolor||"#CC0000",fillOpacity:.35},c.polygon[e]);b=new google.maps.Polygon(d);this._polygons.push(b);b.setMap(a);b&&d.hasOwnProperty("event")&&d.event.hasOwnProperty("created")&&"function"===typeof d.event.created&&d.event.created.call(b,this);d.hasOwnProperty("event")&&this.bindEvents(b,d.event)}},drawCircle:function(a,c){var b={},d={},e={},g={},h=0;if(c.hasOwnProperty("circle")&&Array.isArray(c.circle))for(h=0;h<c.circle.length;h+=1)d=c.circle[h],e=f.extend({},{map:a,
strokeColor:d.color||"#FF0000",strokeOpacity:d.opacity||.8,strokeWeight:d.width||2,fillColor:d.fillcolor||"#FF0000",fillOpacity:d.fillopacity||.35,radius:d.radius||10,zIndex:100,id:d.hasOwnProperty("id")?d.id:""},d),d.hasOwnProperty("center")&&(g=p(d.center,!0),e.center=g),"function"===typeof g.lat&&(b=new google.maps.Circle(e),this._circles.push(b),b&&e.hasOwnProperty("event")&&e.event.hasOwnProperty("created")&&"function"===typeof e.event.created&&e.event.created.call(b,this),d.hasOwnProperty("event")&&
this.bindEvents(b,d.event))},markerIcon:function(a){var c={};if(a.hasOwnProperty("icon")){if("string"===typeof a.icon)return a.icon;a.icon.hasOwnProperty("url")&&(c.url=a.icon.url);a.icon.hasOwnProperty("size")&&Array.isArray(a.icon.size)&&2===a.icon.size.length&&(c.size=this.formatSize(a.icon.size));a.icon.hasOwnProperty("scaledSize")&&Array.isArray(a.icon.scaledSize)&&2===a.icon.scaledSize.length&&(c.scaledSize=this.formatSize(a.icon.scaledSize));a.icon.hasOwnProperty("anchor")&&Array.isArray(a.icon.anchor)&&
2===a.icon.anchor.length&&(c.anchor=this.formatPoint(a.icon.anchor))}return c},processMarker:function(a,c,b,d){var e=this.get("marker");b.hasOwnProperty("position")&&("function"===typeof b.getPosition&&this._bounds.extend(b.position),c.hasOwnProperty("markerFitBounds")&&!0===c.markerFitBounds&&e.marker.length===c.marker.length&&a.fitBounds(this._bounds));b.hasOwnProperty("text")&&b.text.length&&(b.hasOwnProperty("infoWindow")&&"function"===typeof b.infoWindow.setContent?b.infoWindow.setContent(b.text):
(b.infoWindow=new google.maps.InfoWindow(b.hasOwnProperty("infoWindowOptions")?b.infoWindowOptions:{content:b.text}),b.hasOwnProperty("infoWindowOptions")&&"undefined"!==typeof b.infoWindowOptions.event&&this.bindEvents(b.infoWindow,b.infoWindowOptions.event)));d||((!b.hasOwnProperty("cluster")||b.hasOwnProperty("cluster")&&!0===b.cluster)&&"function"===typeof this._clusters.addMarker&&this._clusters.addMarker(b),b.hasOwnProperty("newLabel")&&(label=new y({text:b.newLabel,map:a,css:b.hasOwnProperty("newLabelCSS")?
b.newLabelCSS.toString():"",id:b.id}),label.bindTo("position",b),label.bindTo("visible",b),this._labels.push(label)));b.hasOwnProperty("id")&&this.get({label:[b.id]},function(a){a.label.forEach(function(a){a.text=b.newLabel;f(a.span).addClass(b.newLabelCSS);a.bindTo("position",b);a.draw()})});"object"===typeof label&&google.maps.event.addListener(b,"map_changed",function(){"function"===typeof label.setMap&&label.setMap(this.getMap())});this.bindEvents(b,b.event)},placeMarkers:function(a,c,b){var d=
this,e={},g={maxZoom:null,gridSize:60},h=Array.isArray(c.marker)?c.marker:[];d.options.hasOwnProperty("markerCluster")&&"function"===typeof MarkerClusterer&&(g=f.extend({},g,c.markerCluster),d._clusters=new MarkerClusterer(a,[],g),g.hasOwnProperty("event")&&d.bindEvents(d._clusters,g.event));h.forEach(function(g){var h=p(g.addr,!0),q=d.markerIcon(g),k={map:a,animation:null},v=!0,n=!1,w={},x={},F="undefined"!==typeof g.id?g.id:!1,k=f.extend({},k,g);"modify"===b&&F&&d.get({marker:[F]},function(a){!a.marker||
g.hasOwnProperty("forceInsert")&&!0===g.forceInsert||(g=f.extend(a.marker[0],g),"function"===typeof d._clusters.removeMarker&&d._clusters.removeMarker(a.marker[0]),v=!1,n=!0)});g.hasOwnProperty("title")&&(k.title=g.title.toString().replace(/<([^>]+)>/g,""));f.isEmptyObject(q)||(k.icon=q);g.hasOwnProperty("animation")&&"string"===typeof g.animation&&(k.animation=google.maps.Animation[g.animation.toUpperCase()]);"string"===typeof h?(e=new google.maps.Geocoder,e.geocode({address:h},function(e,h){h===
google.maps.GeocoderStatus.OVER_QUERY_LIMIT?t.setTimeout(function(){d.placeMarkers(a,c,b)},d.interval):h===google.maps.GeocoderStatus.OK&&(!v&&n?("function"===typeof g.setPosition&&g.setPosition(e[0].geometry.location),x=g):(k.position=e[0].geometry.location,w=c.hasOwnProperty("markerWithLabel")&&!0===c.markerWithLabel?"function"===typeof MarkerWithLabel?new MarkerWithLabel(k):new google.maps.Marker(k):new google.maps.Marker(k),d._markers.push(w),x=w),d.processMarker(a,c,x,b))})):(!v&&n?("function"===
typeof g.setPosition&&g.setPosition(h),x=g):(k.position=h,w=c.hasOwnProperty("markerWithLabel")&&!0===c.markerWithLabel?"function"===typeof MarkerWithLabel?new MarkerWithLabel(k):new google.maps.Marker(k):new google.maps.Marker(k),d._markers.push(w),x=w),d.processMarker(a,c,x,b))})},direction:function(a,c){var b=0;if(c.hasOwnProperty("direction")&&Array.isArray(c.direction))for(b=0;b<c.direction.length;b+=1)"undefined"!==typeof c.direction[b]&&this.directionService(c.direction[b])},directionService:function(a){if(!a.hasOwnProperty("from")||
!a.hasOwnProperty("to"))return!1;var c=this,b=new google.maps.DirectionsService,d=new google.maps.DirectionsRenderer,e={},g=[],h=[],l=new google.maps.InfoWindow,m=[],q={},k="",v="",n={travelMode:google.maps.DirectionsTravelMode.DRIVING,optimizeWaypoints:a.hasOwnProperty("optimize")?a.optimize:!0};i=0;n.origin=p(a.from,!0);n.destination=p(a.to,!0);q=f.extend({},{infoWindow:l,map:c.map},a);a.hasOwnProperty("travel")&&google.maps.TravelMode[a.travel.toString().toUpperCase()]&&(n.travelMode=google.maps.TravelMode[a.travel.toString().toUpperCase()]);
a.hasOwnProperty("panel")&&f(a.panel).length&&(q.panel=f(a.panel).get(0));if(a.hasOwnProperty("waypoint")&&Array.isArray(a.waypoint)){for(i=0;i<a.waypoint.length;i+=1)e={},"string"===typeof a.waypoint[i]||Array.isArray(a.waypoint[i])?e={location:p(a.waypoint[i],!0),stopover:!0}:(a.waypoint[i].hasOwnProperty("location")&&(e.location=p(a.waypoint[i].location,!0)),e.stopover=a.waypoint[i].hasOwnProperty("stopover")?a.waypoint[i].stopover:!0),g.push(a.waypoint[i].text||a.waypoint[i].toString()),a.waypoint[i].hasOwnProperty("icon")&&
h.push(a.waypoint[i].icon.toString()),m.push(e);n.waypoints=m}b.route(n,function(b,e){var f=[],m={},n=0;if(e===google.maps.DirectionsStatus.OK){f=b.routes[0].legs;try{a.hasOwnProperty("fromText")&&(k=f[0].start_address=a.fromText);a.hasOwnProperty("toText")&&(1===f.length?f[0].end_address=a.toText:f[f.length-1].end_address=a.toText,v=a.toText);a.hasOwnProperty("icon")&&(q.suppressMarkers=!0,a.icon.hasOwnProperty("from")&&"string"===typeof a.icon.from&&c.directionServiceMarker(f[0].start_location,
{icon:a.icon.from,text:k},l,a),a.icon.hasOwnProperty("to")&&"string"===typeof a.icon.to&&c.directionServiceMarker(f[f.length-1].end_location,{icon:a.icon.to,text:v},l,a));for(n=0;n<f.length;n+=1)a.hasOwnProperty("icon")&&(a.icon.hasOwnProperty("waypoint")&&"string"===typeof a.icon.waypoint?m.icon=a.icon.waypoint:"string"===typeof h[n-1]&&(m.icon=h[n-1]),m.text=g[n-1],c.directionServiceMarker(f[n].start_location,m,l,a));a.hasOwnProperty("event")&&a.event.hasOwnProperty("created")&&"function"===typeof a.event.created&&
a.event.created.call(c,d,b)}catch(p){console.error(p)}c.bindEvents(d,a.event);d.setOptions(q);d.setDirections(b)}});c._directions.push(d)},directionServiceMarker:function(a,c,b,d){var e=this,g={},h=f.extend({},{position:a,map:e.map,id:d.hasOwnProperty("id")?d.id:""},c),l=new google.maps.Marker(h);h.hasOwnProperty("text")&&(g=function(){b.setPosition(a);b.setContent(h.text);b.open(e.map,l)});e._directionsMarkers.push(l);e.bindEvents(l,g)},getDirectionsInfo:function(){var a=[];this.get("direction",
function(c){c.forEach(function(b,c){var e=b.getDirections();e.hasOwnProperty("routes")&&"undefined"!==typeof e.routes[0]&&"undefined"!==typeof e.routes[0].legs&&(a[c]=[],e.routes[0].legs.forEach(function(b,e){a[c].push({from:b.start_address,to:b.end_address,distance:b.distance,duration:b.duration})}))})});return a},streetView:function(a,c){var b=c.hasOwnProperty("streetViewObj")?c.streetViewObj:{},d={},d={};"function"===typeof a.getStreetView&&(b.hasOwnProperty("position")?(d=p(b.position,!0),b.position=
"object"===typeof d?a.getCenter():d):b.position=a.getCenter(),b.hasOwnProperty("pov")&&(b.pov=f.extend({},{heading:0,pitch:0,zoom:1},b.pov)),d=a.getStreetView(),d.setOptions(b),b.hasOwnProperty("event")&&this.bindEvents(d,b.event),b.hasOwnProperty("visible")&&d.setVisible(b.visible))},places:function(a,c){var b=this,d={},d=c.hasOwnProperty("places")?c.places:{},e=f.extend({},{location:a.getCenter(),radius:100},d);e.location=p(e.location,!0);"undefined"!==typeof google.maps.places&&(d=new google.maps.places.PlacesService(a),
d.nearbySearch(e,function(c,d){d===google.maps.places.PlacesServiceStatus.OK&&(b._places.push(c),e.hasOwnProperty("createMarker")&&!0===e.createMarker&&c.forEach(function(c){c.hasOwnProperty("geometry")&&b._markers.push(new google.maps.Marker({map:a,position:c.geometry.location}))}),e.hasOwnProperty("callback")&&"function"===typeof e.callback&&e.callback.call(c))}))},geoLocation:function(a,c){try{var b=this,d=navigator.geolocation,e={};d&&(c.hasOwnProperty("geolocation")&&(e=f.extend({},{maximumAge:6E5,
timeout:3E3,enableHighAccuracy:!1},c.geolocation)),!0!==c.autoLocation&&"function"!==typeof c.autoLocation||d.getCurrentPosition(function(d){"undefined"!==typeof d&&"coords"in d&&"latitude"in d.coords&&"longitude"in d.coords&&(a.panTo(new google.maps.LatLng(d.coords.latitude,d.coords.longitude)),"function"===typeof c.autoLocation&&c.autoLocation.call(b,d))},function(a){console.error(a)},e))}catch(g){}},panTo:function(a){var c=this.map,b={},d={};null!==c&&"undefined"!==typeof c&&(b=p(a,!0),"string"===
typeof b?(d=new google.maps.Geocoder,d.geocode({address:b},function(a,b){b===google.maps.GeocoderStatus.OK&&"function"===typeof c.panTo&&Array.isArray(a)&&a.length?a[0].hasOwnProperty("geometry")&&c.panTo(a[0].geometry.location):console.error(b)})):"function"===typeof c.panTo&&c.panTo(b));return f(this.container)},close:function(a,c){var b=this.get(a),d={},e="";b.hasOwnProperty("map")&&delete b.map;Array.isArray(b)?d[a]=b:d=b;try{for(e in d)Array.isArray(d[e])&&d[e].forEach(function(a){a.hasOwnProperty("infoWindow")&&
"function"===typeof a.infoWindow.close&&a.infoWindow.close()});"function"===typeof c&&c.call(this)}catch(g){console.warn(g)}finally{return f(this.container)}},clear:function(a,c){var b=this,d=b._directionsMarkers,e=b._labels,g=b.get(a),h={},l="";g.hasOwnProperty("map")&&delete g.map;Array.isArray(g)?h[a]=g:h=g;try{for(l in h)key="_"+l.toString().toLowerCase()+"s",Array.isArray(h[l])&&(h[l].forEach(function(a){"marker"===l&&"undefined"!==typeof e[0]&&e.hasOwnProperty("div")&&b._labels[0].div.remove();
"direction"===l&&(d.forEach(function(a,c){"function"===typeof a.setMap&&b._directionsMarkers[c].setMap(null)}),b._directionsMarkers.filter(function(a){return z!==a}));"function"===typeof a.set&&a.set("visible",!1);"function"===typeof a.setMap&&a.setMap(null);b[key][0]=z}),b[key]=b[key].filter(function(a){return z!==a}));"function"===typeof c&&c.call(this)}catch(m){console.warn(m)}finally{return f(b.container)}},get:function(a,c){var b=[],d={},e={},g="",h="",f=0;"undefined"===typeof a&&(a={marker:[],
label:[],polygon:[],polyline:[],circle:[],direction:[],kml:[],cluster:[],bound:[]});try{if("string"===typeof a)if(~a.indexOf(","))for(b=a.replace(/\s/gi,"").split(","),f=0;f<b.length;f+=1)h=b[f].toString().toLowerCase(),"map"===h?d[h]=this.map:(g="_"+h+"s",d[h]=this[g]);else"map"===a.toString().toLowerCase()?d=this.map:(g="_"+a.toString().toLowerCase()+"s",d=this[g]);else{for(e in a)Array.isArray(a[e])&&(g="_"+e.toString().toLowerCase()+"s",Array.isArray(this[g])&&(d[e]=[],this[g].forEach(function(b){(0===
a[e].length||-1!==a[e].indexOf(f)||"undefined"!==typeof b.id&&0<b.id.length&&~a[e].indexOf(b.id))&&d[e].push(b)})));d.map=this.map}"function"===typeof c&&c.call(this,d)}catch(m){console.error(m)}finally{return d}},modify:function(a){var c=[],b=[["kml","kml"],["marker","placeMarkers"],["direction","direction"],["polyline","drawPolyline"],["polygon","drawPolygon"],["circle","drawCircle"],["streetView","streetView"],["markerFitBounds","markerFitBounds"],["places","places"]],d=0,e=this.map;if("undefined"!==
typeof a){for(d=0;d<b.length;d+=1)a.hasOwnProperty(b[d][0])&&c.push(b[d][1]);if(null!==e){if(c.length)for(d=0;d<c.length;d+=1)"function"===typeof this[c[d]]&&("streetView"===c[d]&&(a.streetViewObj=a.streetView,delete a.streetView),this[c[d]](e,a,"modify"));else e.setOptions(a);a.hasOwnProperty("event")&&this.bindEvents(e,a.event);google.maps.event.trigger(e,"resize")}}return f(this.container)},destroy:function(){var a=f(this.container);a.length&&f.removeData(this.container,"tinyMap");return a.empty()},
getKML:function(a){var c=f.extend({},{marker:!0,polyline:!0,polygon:!0,circle:!0,direction:!0,download:!1},a),b="<Placemark> <name><![CDATA[#NAME#]]\x3e</name> <Snippet></Snippet> <description><![CDATA[]]\x3e</description> <styleUrl>#style1</styleUrl> <ExtendedData></ExtendedData> #DATA# </Placemark>".split(" "),d="<Placemark> <styleUrl>#style1</styleUrl> <name><![CDATA[#NAME#]]\x3e</name> <Polygon> <tessellate>1</tessellate> <extrude>1</extrude> <altitudeMode>clampedToGround</altitudeMode> <outerBoundaryIs> <LinearRing> <coordinates>#LATLNG#</coordinates> </LinearRing> </outerBoundaryIs> </Polygon> </Placemark>".split(" "),
e="",g="",h="",l="",m="";a="";this.get("marker,polyline,polygon,circle,direction",function(a){var f="";!0===c.marker&&"undefined"!==typeof a.marker&&a.marker.forEach(function(a){f=[a.getPosition().lng(),a.getPosition().lat()].join();e+=b.join("").replace(/#NAME#/gi,"Markers").replace(/#DATA#/gi,"<Point><coordinates>#LATLNG#,0.000000</coordinates></Point>".replace(/#LATLNG#/gi,f))});!0===c.polyline&&"undefined"!==typeof a.polyline&&a.polyline.forEach(function(a){f="";a.getPath().getArray().forEach(function(a){f+=
[a.lng(),a.lat(),"0.000000\n"].join()});g+=b.join("").replace(/#NAME#/gi,"Polylines").replace(/#DATA#/gi,"<LineString><tessellate>1</tessellate><coordinates>#LATLNG#</coordinates></LineString>".replace(/#LATLNG#/gi,f))});!0===c.polygon&&"undefined"!==typeof a.polygon&&a.polygon.forEach(function(a){f="";a.getPath().getArray().forEach(function(a){f+=[a.lng(),a.lat(),"0.000000\n"].join()});h+=d.join("").replace(/#NAME#/gi,"Polygons").replace(/#LATLNG#/gi,f)});!0===c.circle&&"undefined"!==typeof a.circle&&
a.circle.forEach(function(a){f="";var b=Math.PI/180,c=180/Math.PI,c=a.getRadius()/6378137*c,b=c/Math.cos(a.getCenter().lat()*b);for(j=j=theta=0;65>j;j+=1)theta=j/32*Math.PI,ey=a.getCenter().lng()+b*Math.cos(theta),ex=a.getCenter().lat()+c*Math.sin(theta),f+=[ey,ex,"0.000000\n"].join();l+=d.join("").replace(/#NAME#/gi,"Circles").replace(/#LATLNG#/gi,f)});!0===c.direction&&"undefined"!==typeof a.direction&&a.direction.forEach(function(a){a=a.getDirections();a.hasOwnProperty("routes")&&Array.isArray(a.routes)&&
"undefined"!==typeof a.routes[0]&&"undefined"!==typeof a.routes[0].legs&&Array.isArray(a.routes[0].legs)&&a.routes[0].legs.forEach(function(a){Array.isArray(a.steps)&&a.steps.forEach(function(a){f="";Array.isArray(a.path)&&a.path.forEach(function(a){f+=[a.lng(),a.lat(),"0.000000\n"].join()});m+=b.join("").replace(/#NAME#/gi,"Directions").replace(/#DATA#/gi,"<LineString><tessellate>1</tessellate><coordinates>#LATLNG#</coordinates></LineString>".replace(/#LATLNG#/gi,f))})})})});a='<?xml version="1.0" encoding="UTF-8"?><kml xmlns="http://earth.google.com/kml/2.2"><Document><name><![CDATA[jQuery tinyMap Plugin]]\x3e</name><description><![CDATA[]]\x3e</description><Style id="style1"><PolyStyle><color>50F05A14</color><colorMode>normal</colorMode><fill>1</fill><outline>1</outline></PolyStyle><IconStyle><Icon><href>https://maps.google.com/mapfiles/kml/paddle/grn-circle_maps.png</href></Icon></IconStyle></Style>#PLACEMARKS#</Document></kml>'.replace(/#NAME#/gi,
"").replace(/#PLACEMARKS#/gi,e+g+h+l+m);if(!0===c.download)t.open("data:application/vnd.google-earth.kml+xml;charset=utf-8;base64,"+t.btoa(t.decodeURIComponent(t.encodeURIComponent(a))));else return a},init:function(){var a=this,c={},c={},b=f.extend({},u),d=b.api.split("?")[0],e="",g={};try{delete b.api,delete b.clusterer,delete b.withLabel,b=f.param(b)}catch(h){}C||"undefined"!==typeof t.google||(c=r.createElement("script"),c.setAttribute("src",[d,b].join("?")),(r.getElementsByTagName("head")[0]||
r.documentElement).appendChild(c),C=!0,c=null);if("object"===typeof t.google){!D&&a.options.hasOwnProperty("markerCluster")&&!1!==a.options.markerCluster&&"undefined"===typeof MarkerClusterer&&(c=r.createElement("script"),c.setAttribute("src",u.clusterer),(r.getElementsByTagName("head")[0]||r.documentElement).appendChild(c),D=!0,c=null);!E&&a.options.hasOwnProperty("markerWithLabel")&&!0===a.options.markerWithLabel&&"undefined"===typeof MarkerWithLabel&&(c=r.createElement("script"),c.setAttribute("src",
u.withLabel),(r.getElementsByTagName("head")[0]||r.documentElement).appendChild(c),E=!0,c=null);a._bounds=new google.maps.LatLngBounds;y.prototype=new google.maps.OverlayView;y.prototype.onAdd=function(){this.div.appendTo(f(this.getPanes().overlayLayer));this.listeners=[google.maps.event.addListener(this,"visible_changed",this.onRemove)]};y.prototype.draw=function(){var a=this.getProjection(),b={};try{a&&((b=a.fromLatLngToDivPixel(this.get("position")))&&this.div.css({left:b.x+"px",top:b.y+"px",display:"block"}),
this.text&&this.span.html(this.text.toString()))}catch(c){console.error(c)}};y.prototype.onRemove=function(){f(this.div).remove()};for(g in a.options)a.options.hasOwnProperty(g)&&(vo=a.options[g],/ControlOptions/g.test(g)&&vo.hasOwnProperty("position")&&"string"===typeof vo.position&&(a.options[g].position=google.maps.ControlPosition[vo.position.toUpperCase()]));a.googleMapOptions=a.options;a.options.hasOwnProperty("streetView")&&(a.googleMapOptions.streetViewObj=a.options.streetView,delete a.googleMapOptions.streetView);
a.googleMapOptions.center=p(a.options.center,!0);a.options.hasOwnProperty("styles")&&("string"===typeof a.options.styles&&B.hasOwnProperty(a.options.styles)?a.googleMapOptions.styles=B[a.options.styles]:Array.isArray(a.options.styles)&&(a.googleMapOptions.styles=a.options.styles));"string"===typeof a.options.center?(c=new google.maps.Geocoder,c.geocode({address:a.options.center},function(b,c){try{c===google.maps.GeocoderStatus.OVER_QUERY_LIMIT?t.setTimeout(function(){a.init()},a.interval):c===google.maps.GeocoderStatus.OK&&
Array.isArray(b)?0<b.length&&b[0].hasOwnProperty("geometry")&&(a.googleMapOptions.center=b[0].geometry.location,a.map=new google.maps.Map(a.container,a.googleMapOptions),google.maps.event.addListenerOnce(a.map,"idle",function(){a.overlay();google.maps.event.trigger(a.map,"resize")}),a.bindEvents(a.map,a.options.event)):(e=(a.options.notFound||c).toString(),a.container.innerHTML(f("<div/>").text(e).html()),console.error("Geocoder Error Code: "+c))}catch(d){console.error(d)}})):(a.map=new google.maps.Map(a.container,
a.googleMapOptions),google.maps.event.addListenerOnce(a.map,"idle",function(){a.overlay();google.maps.event.trigger(a.map,"resize")}),a.bindEvents(a.map,a.options.event))}}};f.fn.tinyMapConfigure=function(a){u=f.extend(u,a)};f.fn.tinyMapDistance=function(a,c){var b={key:u.hasOwnProperty("key")?u.key:"",origins:[],destinations:[],language:"zh-TW"},b=f.extend({},b,a);Array.isArray(b.origins)&&(b.origins=b.origins.join("|"));Array.isArray(b.destinations)&&(b.destinations=b.destinations.join("|"));f.getJSON("//maps.googleapis.com/maps/api/distancematrix/json",
b,function(a){"OK"===a.status&&c.cal(this,a)})};f.fn.tinyMapQuery=function(a,c){var b={key:u.hasOwnProperty("key")?u.key:"",language:"zh-TW"},d=f.extend({},b,a),e=null;f.getJSON("//maps.googleapis.com/maps/api/geocode/json",d,function(a){"OK"===a.status&&a.results&&"undefined"!==typeof a.results[0]&&(d.hasOwnProperty("latlng")?e=a.results[0].formatted_address:d.hasOwnProperty("address")&&(e=[a.results[0].geometry.location.lat,a.results[0].geometry.location.lng].join()),c.call(this,e))})};f.fn.tinyMap=
function(a){var c={},b=[],d=arguments;return"string"===typeof a?(this.each(function(){c=f.data(this,"tinyMap");c instanceof A&&"function"===typeof c[a]&&(b=c[a].apply(c,Array.prototype.slice.call(d,1)))}),"undefined"!==typeof b?b:this):this.each(function(){f.data(this,"tinyMap")||f.data(this,"tinyMap",new A(this,a))})}})(window.jQuery||{},window,document);
